<!DOCTYPE html>
<html>

<head>
    <meta charset="utf8">
    <title>我的账号</title>
    <link rel="stylesheet" href="../CSS/accoutNav.css">
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>

<body>
    <div class="table">
        <div id="navList">
            <div id="flexList1">
                <div id="flexList2">
                    <a href="">用户信息</a>
                    <a href="changePassword.html" id="changePassword">修改密码</a>
                    <a href="">修改邮箱</a>
                    <a href="">修改邮箱</a>
                    <a href="">修改地址</a>
                    <a href="deleteAccount.html" id="deleteAccount">删除账号</a>
                </div>

            </div>
        </div>
        <div id="content">
            <ul class="userInfo">
                <p id="header">
                    修改密码
                </p>
                <hr>
                <li>
                    <label for="oldPassword">请输入旧密码：</label>
                    <input type="password" id="oldPassword" name="oldPassword">
                </li>
                <li>
                    <label for="newPassword">请输入新密码：</label>
                    <input type="password" id="newPassword" name="newPassword">
                </li>
                <li>
                    <label for="newPassword">请确认新密码：</label>
                    <input type="password" id="newPassword" name="newPassword">
                </li>

                <li>
                    <label for=""></label>
                    <button id="submitButton" type="button" onclick="change()">提交</button>
                </li>
        </div>
    </div>

    </div>
</body>
<script>
    var account = window.location.split('?')[1];
    var deleteAccount = document.getElementById("deleteAccount");
    deleteAccount = deleteAccount + "?" + account;
    var userInfoLink = document.getElementById("changePassword");
    userInfoLink.href = window.location;

    function change() {
        $.ajax({
            type: "post",
            url: "",
            data: {
                "account": account,
                "oldPassword": $("#oldPassword").val(),
                "newPassword": $("#newPassword").val()
            },
            success: function (data) {
                if (data === 1) {
                    alert("更改成功");
                } else {
                    alert("您的密码有误，请重试");
                }
            }
        });
    }
</script>

</html>